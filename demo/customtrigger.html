<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Custom Trigger demo</title>

 <style>
body
{
	font-family: arial, helvetica, freesans, sans-serif;
	font-size: 100%;
	color: #333;
	background-color: #ddd;
}

h1
{
	font-size: 1.5em;
	font-weight: normal;
	margin: 0;
}

pre
{
	height: 20em;
	font-family: monospace;
	font-size: 1em;
	padding: 2px 5px;
	color: #0f0;
	background-color: #111;
	border: 1px solid #030;
	border-radius: 4px;
	overflow: auto;
}

fieldset
{
	padding: 10px;
	border-radius: 10px;
}

label, input, button
{
	display: block;
	width: 80%;
	font-size: 1em;
	text-align: center;
	margin: 2px auto;
}

button
{
	width: 10em;
	font-weight: bold;
}
</style>

 <script type="text/javascript" src="modules/hazzle.js"></script>
    <script type="text/javascript" src="modules/ntapi.js"></script>
    <script type="text/javascript" src="modules/types.js"></script>
    <script type="text/javascript" src="modules/ready.js"></script>
    <script type="text/javascript" src="modules/shims/pnow.js"></script>
    <script type="text/javascript" src="modules/extra.js"></script>
    <script type="text/javascript" src="modules/text.js"></script>
    <script type="text/javascript" src="modules/core.js"></script>
    <script type="text/javascript" src="modules/cl3.js"></script>
    <script type="text/javascript" src="modules/cl4.js"></script>
    <script type="text/javascript" src="modules/changers.js"></script>
    <script type="text/javascript" src="modules/compile.js"></script>
    <script type="text/javascript" src="modules/jiesa.js"></script>
    <script type="text/javascript" src="modules/matchesselector.js"></script>    
    <script type="text/javascript" src="modules/matches.js"></script>        
    <script type="text/javascript" src="modules/raf.js"></script>
    <script type="text/javascript" src="modules/fx.js"></script>
    <script type="text/javascript" src="modules/parse.js"></script>
    <script type="text/javascript" src="modules/data.js"></script>
    <script type="text/javascript" src="modules/shims/classlist.js"></script>
    <script type="text/javascript" src="modules/classes.js"></script>
    <script type="text/javascript" src="modules/appendhtml.js"></script>
    <script type="text/javascript" src="modules/manipulation.js"></script>
    <script type="text/javascript" src="modules/attributes.js"></script>
    <script type="text/javascript" src="modules/removeable.js"></script>
    <script type="text/javascript" src="modules/units.js"></script>
    <script type="text/javascript" src="modules/css.js"></script>
    <script type="text/javascript" src="modules/shims/topleft.js"></script>
    <script type="text/javascript" src="modules/position.js"></script>
    <script type="text/javascript" src="modules/offset.js"></script>
    <script type="text/javascript" src="modules/showhide.js"></script>
    <script type="text/javascript" src="modules/detection.js"></script>
    <script type="text/javascript" src="modules/events.js"></script>
    <script type="text/javascript" src="modules/trigger.js"></script>    
    <script type="text/javascript" src="modules/aliases.js"></script>
    <script type="text/javascript" src="modules/eventHooks.js"></script>
    <script type="text/javascript" src="modules/ajax.js"></script>
    <script type="text/javascript" src="modules/clone.js"></script>
    <script type="text/javascript" src="modules/jsonxml.js"></script>
</head>
<body>

<form id="msgbox" action="#" method="get">
<fieldset>
<label for="msg">your message</label>
<input id="msg" value="" />
<button>SEND</button>
</fieldset>
</form>
<pre id="log">Event information log
=====================
</pre>

</body>
</html>


<script>

var $ = hAzzle;
var log = $("#log")[0];

// form submit handler
$("#msgbox").on("submit", SendMessage);


// newMessage event subscribers
$(document).on("newMessage", newMessageHandler);
$("body").on("newMessage", newMessageHandler);
$("#msgbox").on("newMessage", newMessageHandler);


// newMessage event handler
function newMessageHandler(e) {
    console.log(Object.keys(e))

    LogEvent(
        "Event subscriber on " + e.currentTarget.nodeName + ", " + e.time.toLocaleString() + ": " + e.message
    );
}


// new message: raise newMessage event
function SendMessage(e) {

    e.preventDefault();
    var msg = $("#msg").val().trim();

    if (msg) {
        $.event.trigger({
            type: "newMessage",
            message: msg,
            time: new Date()
        });
    }

}

// log event in console
function LogEvent(msg) {
    log.textContent += msg + "\n";
    var ot = log.scrollHeight - log.clientHeight;
    if (ot > 0) log.scrollTop = ot;
}
</script>
